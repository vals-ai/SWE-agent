diff --git a/sympy/core/mul.py b/sympy/core/mul.py
index d4af08fa73..8c7082102d 100644
--- a/sympy/core/mul.py
+++ b/sympy/core/mul.py
@@ -251,8 +251,12 @@ def flatten(cls, seq):
         # o neg1e
         # o pnum_rat
         #
+        from sympy.physics.quantum.operator import IdentityOperator
         # NOTE: this is optimized for all-objects-are-commutative case
         for o in seq:
+            # Handle IdentityOperator like S.One
+            if isinstance(o, IdentityOperator):
+                continue
             # O(x)
             if o.is_Order:
                 o, order_symbols = o.as_expr_variables(order_symbols)
