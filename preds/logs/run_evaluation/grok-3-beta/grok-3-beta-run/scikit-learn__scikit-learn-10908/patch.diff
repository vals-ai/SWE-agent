diff --git a/reproduce.py b/reproduce.py
new file mode 100644
index 000000000..7baab4dca
--- /dev/null
+++ b/reproduce.py
@@ -0,0 +1,31 @@
+
+from sklearn.feature_extraction.text import CountVectorizer
+
+# Initialize CountVectorizer with a predefined vocabulary
+vocabulary = ['and', 'document', 'first', 'is', 'one', 'second', 'the', 'third', 'this']
+vectorizer = CountVectorizer(vocabulary=vocabulary)
+
+# Check if vocabulary_ attribute exists before fitting
+print('Has vocabulary_ before fitting:', hasattr(vectorizer, 'vocabulary_'))
+
+# Try to get feature names before fitting
+try:
+    vectorizer.get_feature_names()
+    print('Successfully got feature names before fitting.')
+except Exception as e:
+    print('Error getting feature names before fitting:', str(e))
+
+# Define a corpus
+corpus = [
+    'This is the first document.',
+    'This is the second second document.',
+    'And the third one.',
+    'Is this the first document?',
+]
+
+# Transform the corpus without fitting
+result = vectorizer.transform(corpus)
+print('Transformed corpus without fitting:', result.shape)
+
+# Check if vocabulary_ attribute exists after transform
+print('Has vocabulary_ after transform:', hasattr(vectorizer, 'vocabulary_'))
\ No newline at end of file
diff --git a/sklearn/feature_extraction/text.py b/sklearn/feature_extraction/text.py
index 9b1ebd632..e47fd57b6 100644
--- a/sklearn/feature_extraction/text.py
+++ b/sklearn/feature_extraction/text.py
@@ -993,7 +993,11 @@ class CountVectorizer(BaseEstimator, VectorizerMixin):
 
     def get_feature_names(self):
         """Array mapping from feature integer indices to feature name"""
-        self._check_vocabulary()
+        # If a vocabulary is provided but not yet set, validate it
+        if self.vocabulary is not None and not hasattr(self, 'vocabulary_'):
+            self._validate_vocabulary()
+        else:
+            self._check_vocabulary()
 
         return [t for t, i in sorted(six.iteritems(self.vocabulary_),
                                      key=itemgetter(1))]
